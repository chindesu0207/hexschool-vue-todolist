import{u as g,r,c as v,a as e,w as i,v as n,t as u,b,d as h,e as x,o as y,f as C,R as k}from"./index-CchHn25E.js";import{a as _,S as m}from"./sweetalert2.esm.all-DYEfS7jK.js";const V={id:"loginPage",class:"bg-yellow"},B={class:"conatiner loginPage vhContainer"},R={class:"formControls",action:"index.html"},$="https://todolist-api.hexschool.io",A={__name:"LoginView",setup(I){const d=g(),o=r({email:"",password:""}),t=r({email:"",password:""}),p=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,c=/^[A-Za-z\d@$!%*?&]{6,}$/,w=()=>(o.value.email?o.value.email.match(p)||(t.value.email="email 格式錯誤"):t.value.email="email 欄位未提供",o.value.password?o.value.password.match(c)||(t.value.password="password 長度不足 6 個字"):t.value.password="password 欄位未提供",Object.keys(t.value).length==0),f=async()=>{if(t.value={},w())try{const a=await _.post(`${$}/users/sign_in`,o.value);document.cookie=`todoToken=${a.data.token};`,o.value={},t.value={},m.fire({toast:!0,position:"center",showConfirmButton:!1,timer:2e3,icon:"success",title:"登入成功"}),d.push("/todo")}catch(a){let s=a.response.data.message;Array.isArray(s)||m.fire({title:s,icon:"error",timer:2e3,confirmButtonText:"關閉"})}};return(a,s)=>(y(),v("div",V,[e("div",B,[s[6]||(s[6]=e("div",{class:"side"},[e("a",{href:"#"},[e("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),e("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),e("div",null,[e("form",R,[s[3]||(s[3]=e("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1)),s[4]||(s[4]=e("label",{class:"formControls_label",for:"email"},"Email",-1)),i(e("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email","onUpdate:modelValue":s[0]||(s[0]=l=>o.value.email=l),required:""},null,512),[[n,o.value.email]]),e("span",null,u(t.value.email),1),s[5]||(s[5]=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),i(e("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼","onUpdate:modelValue":s[1]||(s[1]=l=>o.value.password=l),required:""},null,512),[[n,o.value.password]]),e("span",null,u(t.value.password),1),e("input",{class:"formControls_btnSubmit",type:"button",value:"登入",onClick:f}),b(x(k),{class:"formControls_btnLink",to:"/signup"},{default:h(()=>s[2]||(s[2]=[C("註冊帳號")])),_:1})])])])]))}};export{A as default};
