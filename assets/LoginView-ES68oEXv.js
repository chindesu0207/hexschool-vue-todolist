import{u as g,r,c as v,a as s,w as i,v as n,t as u,b,d as h,e as x,o as y,f as C,R as k}from"./index-YI_RKgWD.js";import{a as _,S as m}from"./sweetalert2.esm.all-DYEfS7jK.js";const V={id:"loginPage",class:"bg-yellow"},B={class:"conatiner loginPage vhContainer"},R={class:"formControls",action:"index.html"},$="https://todolist-api.hexschool.io",A={__name:"LoginView",setup(I){const d=g(),o=r({email:"",password:""}),t=r({email:"",password:""}),p=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,c=/^[A-Za-z\d@$!%*?&]{6,}$/,w=()=>(o.value.email?o.value.email.match(p)||(t.value.email="email 格式錯誤"):t.value.email="email 欄位未提供",o.value.password?o.value.password.match(c)||(t.value.password="password 長度不足 6 個字"):t.value.password="password 欄位未提供",Object.keys(t.value).length==0),f=async()=>{if(t.value={},w())try{const a=await _.post(`${$}/users/sign_in`,o.value);document.cookie=`todoToken=${a.data.token};`,o.value={},t.value={},m.fire({toast:!0,position:"center",showConfirmButton:!1,timer:2e3,icon:"success",title:"登入成功"}),d.push("/todo")}catch(a){let e=a.response.data.message;Array.isArray(e)||m.fire({title:e,icon:"error",timer:2e3,confirmButtonText:"關閉"})}};return(a,e)=>(y(),v("div",V,[s("div",B,[e[6]||(e[6]=s("div",{class:"side"},[s("a",{href:"#"},[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),s("div",null,[s("form",R,[e[3]||(e[3]=s("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1)),e[4]||(e[4]=s("label",{class:"formControls_label",for:"email"},"Email",-1)),i(s("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email","onUpdate:modelValue":e[0]||(e[0]=l=>o.value.email=l),required:""},null,512),[[n,o.value.email]]),s("span",null,u(t.value.email),1),e[5]||(e[5]=s("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),i(s("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼","onUpdate:modelValue":e[1]||(e[1]=l=>o.value.password=l),required:""},null,512),[[n,o.value.password]]),s("span",null,u(t.value.password),1),s("input",{class:"formControls_btnSubmit",type:"button",value:"登入",onClick:f}),b(x(k),{class:"formControls_btnLink",to:"/signup"},{default:h(()=>e[2]||(e[2]=[C("註冊帳號")])),_:1})])])])]))}};export{A as default};
