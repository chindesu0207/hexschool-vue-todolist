import{u as f,r as u,c as g,a,w as t,v as n,t as r,b as k,d as b,e as h,o as C,f as x,R as y}from"./index-DeHKnByj.js";import{a as P,S as d}from"./sweetalert2.esm.all-DYEfS7jK.js";const U={id:"signUpPage",class:"bg-yellow"},V={class:"conatiner signUpPage vhContainer"},B={class:"formControls",action:"index.html"},R="https://todolist-api.hexschool.io",$={__name:"SignUpView",setup(S){const m=f(),l=u({email:"",nickname:"",password:"",checkPwd:""}),s=u({email:"",password:"",nickname:"",checkPwd:""}),p=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,c=/^[A-Za-z\d@$!%*?&]{6,}$/,w=()=>{if(l.value.email?l.value.email.match(p)||(s.value.email="email 格式錯誤"):s.value.email="email 欄位未提供",l.value.nickname||(s.value.nickname="nickname 欄位未提供"),l.value.password?l.value.password.match(c)||(s.value.password="password 長度不足 6 個字"):s.value.password="password 欄位未提供",l.value.checkPwd?l.value.password!=l.value.checkPwd&&(s.value.checkPwd=" password 不相符"):s.value.checkPwd=" 請再次輸入 password",Object.keys(s.value).length==0)return!0},v=async()=>{if(s.value={},w())try{const i=await P.post(`${R}/users/sign_up`,l.value);l.value={},s.value={},d.fire({toast:!0,position:"center",showConfirmButton:!1,timer:2e3,icon:"success",title:"註冊成功"}),m.push("/login")}catch(i){let e=i.response.data.message;s.value={},Array.isArray(e)||d.fire({title:e,timer:2e3,icon:"error",confirmButtonText:"關閉"})}};return(i,e)=>(C(),g("div",U,[a("div",V,[e[10]||(e[10]=a("div",{class:"side"},[a("a",{href:"#"},[a("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),a("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),a("div",null,[a("form",B,[e[5]||(e[5]=a("h2",{class:"formControls_txt"},"註冊帳號",-1)),e[6]||(e[6]=a("label",{class:"formControls_label",for:"email"},"Email",-1)),t(a("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email","onUpdate:modelValue":e[0]||(e[0]=o=>l.value.email=o),required:""},null,512),[[n,l.value.email]]),a("span",null,r(s.value.email),1),e[7]||(e[7]=a("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),t(a("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱","onUpdate:modelValue":e[1]||(e[1]=o=>l.value.nickname=o),required:""},null,512),[[n,l.value.nickname]]),a("span",null,r(s.value.nickname),1),e[8]||(e[8]=a("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),t(a("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼","onUpdate:modelValue":e[2]||(e[2]=o=>l.value.password=o),required:""},null,512),[[n,l.value.password]]),a("span",null,r(s.value.password),1),e[9]||(e[9]=a("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1)),t(a("input",{class:"formControls_input",type:"password",name:"pwd",id:"checkPwd",placeholder:"請再次輸入密碼","onUpdate:modelValue":e[3]||(e[3]=o=>l.value.checkPwd=o),required:""},null,512),[[n,l.value.checkPwd]]),a("span",null,r(s.value.checkPwd),1),a("input",{class:"formControls_btnSubmit",type:"button",onClick:v,value:"註冊帳號"}),k(h(y),{class:"formControls_btnLink",to:"login"},{default:b(()=>e[4]||(e[4]=[x("登入")])),_:1})])])])]))}};export{$ as default};
