import{u as g,r as u,c as k,a,w as t,v as n,t as r,b,d as h,e as C,o as x,f as y,R as P}from"./index-ClRWuhra.js";import{a as U,S as m}from"./sweetalert2.esm.all-DYEfS7jK.js";const V={id:"signUpPage",class:"bg-yellow"},B={class:"conatiner signUpPage vhContainer"},R={class:"formControls",action:"index.html"},S="https://todolist-api.hexschool.io",A={__name:"SignUpView",setup(_){const p=g(),s=u({email:"",nickname:"",password:"",checkPwd:""}),l=u({email:"",password:"",nickname:"",checkPwd:""}),c=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,w=/^[A-Za-z\d@$!%*?&]{6,}$/,d=u(!1),v=()=>{s.value.email?s.value.email.match(c)||(l.value.email="email 格式錯誤"):l.value.email="email 欄位未提供",s.value.nickname||(l.value.nickname="nickname 欄位未提供"),s.value.password?s.value.password.match(w)||(l.value.password="password 長度不足 6 個字"):l.value.password="password 欄位未提供",s.value.checkPwd?s.value.password!=s.value.checkPwd&&(l.value.checkPwd=" password 不相符"):l.value.checkPwd=" 請再次輸入 password",Object.keys(l.value).length==0&&(d.value=!0)},f=async()=>{if(l.value={},v(),d.value)try{const i=await U.post(`${S}/users/sign_up`,s.value);s.value={},l.value={},m.fire({toast:!0,position:"center",showConfirmButton:!1,timer:2e3,icon:"success",title:"註冊成功"}),p.push("/login")}catch(i){let e=i.response.data.message;l.value={},Array.isArray(e)||m.fire({title:e,timer:2e3,icon:"error",confirmButtonText:"關閉"})}};return(i,e)=>(x(),k("div",V,[a("div",B,[e[10]||(e[10]=a("div",{class:"side"},[a("a",{href:"#"},[a("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),a("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),a("div",null,[a("form",R,[e[5]||(e[5]=a("h2",{class:"formControls_txt"},"註冊帳號",-1)),e[6]||(e[6]=a("label",{class:"formControls_label",for:"email"},"Email",-1)),t(a("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email","onUpdate:modelValue":e[0]||(e[0]=o=>s.value.email=o),required:""},null,512),[[n,s.value.email]]),a("span",null,r(l.value.email),1),e[7]||(e[7]=a("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),t(a("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱","onUpdate:modelValue":e[1]||(e[1]=o=>s.value.nickname=o),required:""},null,512),[[n,s.value.nickname]]),a("span",null,r(l.value.nickname),1),e[8]||(e[8]=a("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),t(a("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼","onUpdate:modelValue":e[2]||(e[2]=o=>s.value.password=o),required:""},null,512),[[n,s.value.password]]),a("span",null,r(l.value.password),1),e[9]||(e[9]=a("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1)),t(a("input",{class:"formControls_input",type:"password",name:"pwd",id:"checkPwd",placeholder:"請再次輸入密碼","onUpdate:modelValue":e[3]||(e[3]=o=>s.value.checkPwd=o),required:""},null,512),[[n,s.value.checkPwd]]),a("span",null,r(l.value.checkPwd),1),a("input",{class:"formControls_btnSubmit",type:"button",onClick:f,value:"註冊帳號"}),b(C(P),{class:"formControls_btnLink",to:"login"},{default:h(()=>e[4]||(e[4]=[y("登入")])),_:1})])])])]))}};export{A as default};
