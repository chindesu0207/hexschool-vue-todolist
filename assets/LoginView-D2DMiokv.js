import{u as g,r as i,c as b,a as e,w as n,v as u,t as m,b as h,d as x,e as y,o as C,f as k,R as _}from"./index-ClRWuhra.js";import{a as V,S as d}from"./sweetalert2.esm.all-DYEfS7jK.js";const B={id:"loginPage",class:"bg-yellow"},R={class:"conatiner loginPage vhContainer"},$={class:"formControls",action:"index.html"},I="https://todolist-api.hexschool.io",D={__name:"LoginView",setup(S){const p=g(),o=i({email:"",password:""}),a=i({email:"",password:""}),c=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,w=/^[A-Za-z\d@$!%*?&]{6,}$/,r=i(!1),f=()=>{o.value.email?o.value.email.match(c)||(a.value.email="email 格式錯誤"):a.value.email="email 欄位未提供",o.value.password?o.value.password.match(w)||(a.value.password="password 長度不足 6 個字"):a.value.password="password 欄位未提供",Object.keys(a.value).length==0&&(r.value=!0)},v=async()=>{if(a.value={},f(),r.value)try{const t=await V.post(`${I}/users/sign_in`,o.value);document.cookie=`todoToken=${t.data.token};`,o.value={},a.value={},d.fire({toast:!0,position:"center",showConfirmButton:!1,timer:2e3,icon:"success",title:"登入成功"}),p.push("/todo")}catch(t){let s=t.response.data.message;Array.isArray(s)||d.fire({title:s,icon:"error",timer:2e3,confirmButtonText:"關閉"})}};return(t,s)=>(C(),b("div",B,[e("div",R,[s[6]||(s[6]=e("div",{class:"side"},[e("a",{href:"#"},[e("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),e("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),e("div",null,[e("form",$,[s[3]||(s[3]=e("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1)),s[4]||(s[4]=e("label",{class:"formControls_label",for:"email"},"Email",-1)),n(e("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email","onUpdate:modelValue":s[0]||(s[0]=l=>o.value.email=l),required:""},null,512),[[u,o.value.email]]),e("span",null,m(a.value.email),1),s[5]||(s[5]=e("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),n(e("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼","onUpdate:modelValue":s[1]||(s[1]=l=>o.value.password=l),required:""},null,512),[[u,o.value.password]]),e("span",null,m(a.value.password),1),e("input",{class:"formControls_btnSubmit",type:"button",value:"登入",onClick:v}),h(y(_),{class:"formControls_btnLink",to:"/signup"},{default:x(()=>s[2]||(s[2]=[k("註冊帳號")])),_:1})])])])]))}};export{D as default};
